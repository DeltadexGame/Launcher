<html>
  <head>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons"
    rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="file:///styles.css">   
    <link rel="stylesheet" type="text/css" href="file:///light_theme.css">   

  </head>
  <body>
  
  <div class="default">
      <div class="sidebar">
          <div class="sidebar_inner">
            <ul class="icons">
                <li class="link">
                  <div class="btn-primary tooltip">
                    <i class="material-icons md-18 active">home</i>
                    <div class="right">
                        <h3>Home</h3>
                    </div>
                </div>
                </li>

                <li class="link">
                  <a href="login.html">
                    <div class="btn-primary tooltip">
                      <i class="material-icons md-18">group</i>
                      <div class="right">
                          <h3>Login</h3>
                      </div>
                  </div>
                  </a>
                </li>

                <li class="link">
                  <a href="news.html">
                    <div class="btn-primary tooltip">
                      <i class="material-icons md-18">info</i>
                      <div class="right">
                          <h3>News</h3>
                      </div>
                  </div>
                  </a>
                </li>

                <li class="link">
                  <a href="latest-cards.html">
                    <div class="btn-primary tooltip">
                      <i class="material-icons md-18">pages</i>
                      <div class="right">
                          <h3>Cards</h3>
                          <i></i>
                      </div>
                  </div>
                  </a>
                </li>

                <li class="end link">
                  <a href="settings.html">
                    <div class="btn-primary tooltip">
                      <i class="material-icons md-18">settings</i>
                      <div class="right">
                          <h3>Settings</h3>
                          <i></i>
                      </div>
                  </div>
                  </a>

                </li>
              </ul>
          </div>

      </div>

      <nav class="topnav">
        <span id="logo">Deltadex</span>
        <ul>
          <li><a href="file:///latest-cards.html">Latest Cards</a></li>
          <li><a href="file:///news.html">News</a></li>
        </ul>
      
      </nav>
      
      <div class="main">
        <div class="main_content">
          <section class="content">

            <article class="login">
                <h1 id="landing_title">Get Started</h1>

                <img src="file:///Deltadex.PnG" id="landing_img"/>

                <span class="btn_block">
                  <div onmouseup="launch();" class="btn">Launch Game</div>

                </span>
                <div id="result"></div>
                <p id="auth"></p>

                <div id="results">
                </div>

                <div id="progress_container" style="display: none;">
                  <div id="progress_bar"></div>
                </div>
            </article>
            </article>
          </section>
      </div>      
      </div>
    </div>

    <script>
      var progress = 0;

      function launch() {
        var landing_img = document.getElementById("landing_img");
        landing_img.style.display = "none";
        var landing_title = document.getElementById("landing_title");
        landing_title.style.marginBottom = "5vh";

        var is_logged_in = VerifyAuth();

        if (is_logged_in == true) {
          clearStatuses();
          displayProgressBar();
          appendNewStatus("Downloading resources ...");

          setTimeout(function () {OnDownloadGame()}, 400);
          setTimeout(function () { startProgressAnimation();}, 100);
          setTimeout(function () { appendNewStatus("Downloading images ...");}, 100);
          setTimeout(function () { appendNewStatus("Downloading files ...");}, 250);
          setTimeout(function () { appendNewStatus("Downloading assets ...");}, 350);
          setTimeout(function () { startProgressAnimation();}, 350);
          setTimeout(function () { appendNewStatus("Executing ...");}, 500);
        }
        else {
          DisplayPage("login")

        }
      }

      function updateStatus(status) {
        document.getElementById("result").innerHTML = status;

      }

      function clearStatuses() {
        document.getElementById("result").innerHTML = "";
        document.getElementById("results").innerHTML = "";
      }

      function displayProgressBar() {
        document.getElementById("progress_container").style.display = "inline";
      }

      function appendNewStatus(status) {
        let new_status = document.createElement("p");
        new_status.innerHTML = status;
        let results = document.getElementById("results");
        results.appendChild(new_status);
      }

      function startProgressAnimation() {
        document.getElementById("progress_container").style.display = "inline";

        if (progress == 0) {
          progress = 1;
          var progress_bar = document.getElementById("progress_bar");
          var progress_bar_width = 1;
          var progress_interval_id = setInterval(frame, 10);

          function frame() {
            if (progress_bar_width >= 100) {
              clearInterval(progress_interval_id);

              // reset progress back to zero
              progress = 0;
            } else {
              progress_bar_width++;
              progress_bar.style.width = progress_bar_width + "%";
            }
          }
        }
      }
    </script>

  </body>
</html>